webpackJsonp([1],{"G/5Q":function(t,n){t.exports=BMap},gLT5:function(t,n){},irHx:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("MVMM"),a={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=e("Z0/y")({name:"App"},a,!1,function(t){e("xBYw")},null,null).exports,c=e("zO6J"),o=e("G/5Q"),u=e.n(o);var r={name:"Index",data:function(){return{nav_index:5,items:[{text:"区域",type:"menu_select",menu_index:0,sub_nav_index:"",children:[{sub_text:"按区域",sub_children:["全部","附近","滨湖区","新吴区","惠山区","锡山区","宜兴市","江阴市","梁溪区"]}]},{text:"面积",type:"menu_list",menu_index:0,sub_nav_index:"",children:["80-90㎡","90-100㎡","100-110㎡","110-120㎡","120-130㎡","130-140㎡","140-180㎡"]},{text:"类型",type:"menu_list",menu_index:0,sub_nav_index:"",children:["在建工地","完工工地"]},{text:"更多",children:[]}],mapHeight:"",box_mask:!1,search_options:"",map:"",bs:""}},created:function(){},mounted:function(){this.initMap(),this.resizeMapHeight(),this.initMapData(),this.map.addEventListener("zoomend",this.move_or_zoom),this.map.addEventListener("dragend",this.move_or_zoom)},computed:{area_menu:function(){return(this.items[this.nav_index]||{}).children||{}},area_submenu:function(){return(this.area_menu[this.items[this.nav_index].menu_index]||{}).sub_children||{}},mainWidth:function(){var t=this.area_menu||{};return t.length>0&&(t=t.filter(function(t){return 0!==t.sub_children.length})),0===t.length?"100%":"40%"},Ishave:function(){return"100%"!==this.mainWidth},menu_select:function(){return"menu_select"===(this.items[this.nav_index]||{}).type},menu_list:function(){return"menu_list"===(this.items[this.nav_index]||{}).type}},methods:{changeActive:function(t){this.nav_index=this.nav_index===t?5:t,this.box_mask=!0},changeNav:function(t){this.items[this.nav_index].menu_index=t},changeSubNav:function(t){this.items[this.nav_index].sub_nav_index=t},resizeMapHeight:function(){var t="orientationchange"in window?"orientationchange":"resize",n=this,e=document.getElementById("allmap");n.mapHeight=document.documentElement.clientHeight-e.offsetTop,window.addEventListener(t,function(){n.mapHeight=document.documentElement.clientHeight-e.offsetTop},!1)},initMap:function(){this.map=new u.a.Map("allmap");var t=new u.a.Point(120.343373,31.540212),n=new u.a.Marker(t);this.map.centerAndZoom(t,16),this.map.addOverlay(n)},change_mask:function(){this.box_mask=!this.box_maskP,this.nav_index=5},initMapData:function(){var t=this.map.getBounds(),n=t.getSouthWest(),e=t.getNorthEast();this.get_site_data_lat(n,e)},addMarker:function(t){var n=new u.a.Point(t.lng,t.lat),e=new u.a.Marker(n);this.map.addOverlay(e)},move_or_zoom:function(){this.bs=this.map.getBounds()},get_site_data_lat:function(t,n){var e=this;(function(t,n){var e=new FormData;let i=new Headers,a=n;return Object.keys(n.body).forEach(function(t){e.append(t,n.body[t])}),a.body=JSON.stringify(n.body),i.append("Content-Type","application/json"),a.headers=i,new Promise((n,e)=>{fetch(t,a).then(t=>t.json()).then(t=>{0===t.ret_code?n(t.ret_msg):e(t)}).catch(t=>{alert(t),console.log(t.msg),e()})})})("http://192.168.1.144:3000/get_site_data_lat",{method:"POST",body:{status:0}}).then(function(i){if(null!==i){var a=i;(a=(a=(a=a.filter(function(e){return e.lat>=t.lat&&e.lat<=n.lat})).sort(function(t,n){return t.lng-n.lng})).filter(function(e){return e.lng>=t.lng&&e.lng<=n.lng})).forEach(function(t){e.addMarker(t)})}})}},watch:{search_options:function(){},bs:function(){var t=this.bs.getSouthWest(),n=this.bs.getNorthEast();this.get_site_data_lat(t,n)}}},_={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",[e("section",{staticClass:"nav-section"},[e("ul",{staticClass:"nav-ul"},t._l(t.items,function(n,i){return e("li",{staticClass:"nav",class:{active:t.nav_index===i},on:{click:function(n){t.changeActive(i)}}},[e("span",{staticClass:"current-condition"},[t._v("\n\t  \t\t\t\t"+t._s(n.text)+"\n\t  \t\t\t")]),t._v(" "),e("i",{staticClass:"icon-arrow"})])})),t._v(" "),e("section",{staticClass:"menu"},[t.menu_select?e("section",{staticClass:"menu_select"},[e("section",{staticClass:"menu1",style:{width:t.mainWidth}},[e("ul",t._l(t.area_menu,function(n,i){return e("li",{class:{active:t.items[t.nav_index].menu_index===i},on:{click:function(n){t.changeNav(i)}}},[t._v(t._s(n.sub_text))])}))]),t._v(" "),t.Ishave?e("section",{staticClass:"menu2"},[e("ul",{staticClass:"sub_menu"},t._l(t.area_submenu,function(n,i){return e("li",{staticClass:"menu2_li",class:{active:t.items[t.nav_index].sub_nav_index===i},on:{click:function(n){t.changeSubNav(i)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(n)+"\n\t\t\t\t\t\t\t")])}))]):t._e()]):t._e(),t._v(" "),t.menu_list?e("section",{staticClass:"menu3 menu_list"},[e("ul",t._l(t.area_menu,function(n,i){return e("li",{class:{active:t.items[t.nav_index].menu_index===i},on:{click:function(n){t.changeNav(i)}}},[e("a",[t._v(t._s(n))])])}))]):t._e()]),t._v(" "),t.box_mask?e("section",{staticClass:"box_mask",on:{click:function(n){t.change_mask()}}}):t._e()]),t._v(" "),e("section",{style:{height:t.mapHeight+"px"},attrs:{id:"allmap"}})])},staticRenderFns:[]};var l=e("Z0/y")(r,_,!1,function(t){e("gLT5")},"data-v-66fe10c4",null).exports;i.a.use(c.a);var h=new c.a({routes:[{path:"/",name:"index",component:l}]});i.a.config.productionTip=!1,new i.a({el:"#app",router:h,components:{App:s},template:"<App/>"})},xBYw:function(t,n){}},["irHx"]);
//# sourceMappingURL=app.8b56bcf1ee39c7fec601.js.map